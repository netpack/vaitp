"how to fix attributeerror in blank when calling function in fucntion? i want to write in a db table new google analytics accounts if there are any...there are 5 functions executing in a row, one after each other:...db_connection() - connect to database.get_current_sql_account_table() - fetches actual sql table with google analytics accounts in dataframe format.get_account_list() - gets ga accounts list and converts it in dataframe.compare_df() - compares 2 dataframes and if there are new ga accounts writes them in db with this function.write_new_accounts_to_db()...and the ga service key credentials put in variables...the code itself works ok, but when it was wrapped into functions and executed i got an error:..attributeerror: 'nonetype' object has no attribute 'cursor'....db_connection().get_current_sql_account_table() ======== here is the problem.get_account_list().compare_df().write_new_accounts_to_db()...cursor is defined in the get_current_sql_account_table() function:..def db_connection():..    #set parameters for connecting with the db.    config = dict(server='server', .              port=port,.              database='db',.              username='user',.              password='pass')..    #set parameters.    conn_str = ('server={server},{port};'   +.            'database={database};'      +.            'uid={username};'           +.            'pwd={password}')..    #connect to db.    conn = pyodbc.connect(.        r'driver={driver};' +.        conn_str.format(**config).    )..    #open the cursor.    cursor = conn.cursor()...i've tried to pass a db_connection as a parameter in get_current_sql_account_table() function:..def get_current_sql_account_table(conn):.    conn=db_connection.    sql_table_current = pd.read_sql('select * from table', con=conn).    return sql_table_current...but got the same error..then i've tried to run everything, but db config not in a function and have another error ..nameerror: name 'sql_table_current' is not defined....the i put everything in main:..def main():.    sql_table_current_table=get_current_sql_account_table().    accounts_response=get_account_list().    conn=db_connection().    compare_df()...if __name__ == '__main__':.    main()....and have this error typeerror: compare_df() missing 2 required positional arguments: 'sql_table_current_table' and 'accounts_response'...i understand that there is a stupid mistake but can't get where..updated..when i tried tio run this code ...def main():..    sql_table_current_table=get_current_sql_account_table().    accounts_response=get_account_list().    conn=db_connection().    compare_df()...if __name__ == '__main__':.    main()....got this error..nameerror                                 traceback (most recent call last).&lt;iblank-input-10-4c89335f4c9b&gt; in &lt;module&gt;.     21 .     22 if __name__ == '__main__':.---&gt; 23     main()..&lt;iblank-input-10-4c89335f4c9b&gt; in main().      8     logging.info('finished').      9 .---&gt; 10     sql_table_current_table=get_current_sql_account_table().     11     accounts_response=get_account_list().     12     conn=db_connection()..&lt;iblank-input-2-92eb504dec52&gt; in get_current_sql_account_table().      1 def get_current_sql_account_table():.----&gt; 2     sql_table_current = pd.read_sql('select * from table', con=conn).      3     return sql_table_current..nameerror: name 'conn' is not defined....but i did put conn=db_connection() like this before"

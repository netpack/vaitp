"copy files and backup the existing + subdirectories i am trying to make a program to backup files from a particular folder, along with the files within the subfolders of the main folder to another backup folder...this is part of the code i am trying to accomplish the goal, however i am getting backed up only the files from the main folder, and the subfolders are being copied entirely(all of the files in them)...  public static string[] backup(string sourcedirectory, string targetdirectory, string backupdirectory).    {.        directoryinfo dibackup = new directoryinfo(backupdirectory);.        directoryinfo ditarget = new directoryinfo(targetdirectory);..        list&lt;string&gt; dups = new list&lt;string&gt;();.        string[] filenamessource = directory.getfiles(sourcedirectory, ""*"", searchoption.alldirectories);.        string[] filenamesdest = directory.getfiles(targetdirectory, ""*"", searchoption.alldirectories);.        list&lt;string&gt; dupns = new list&lt;string&gt;();.        list&lt;string&gt; dupnd = new list&lt;string&gt;();.        list&lt;string&gt; bckp = new list&lt;string&gt;();.        string replacement = """";..        for (int i = 0; i &lt; filenamesdest.length; i++).        {.            string res = filenamesdest[i].replace(targetdirectory, replacement);.            dupnd.add(res);..        }...        foreach (var ns in filenamessource).        {.            string res = ns.replace(sourcedirectory, replacement);.            dupns.add(res);..        }..        var duplicates = dupnd.intersect(dupns);..        string[] duplicatesstringarray = duplicates.toarray();..        foreach (var dup in duplicatesstringarray).        {.            string res = targetdirectory + dup;.            bckp.add(res);..        }..        string[] tobebackedup = bckp.toarray();...        directory.createdirectory(dibackup.fullname);..        // copy each file into the new directory..        foreach (fileinfo fi in ditarget.getfiles()).        {.            if (tobebackedup.contains(fi.fullname)){ ..            fi.copyto(path.combine(dibackup.fullname, fi.name), true);.            }..        }..        // copy each subdirectory using recursion..        foreach (directoryinfo disourcesubdir in ditarget.getdirectories()).        {.            if (tobebackedup.contains(disourcesubdir.fullname)) { .            directoryinfo nexttargetsubdir =.                dibackup.createsubdirectory(disourcesubdir.name);.            copyall(disourcesubdir, nexttargetsubdir);.            }.        }.        return tobebackedup;..    }...any ideas of how can i copy only the files in the subfolders that exist in the ""source"" folder?..also the copyall function:..public static void copyall(directoryinfo source, directoryinfo target).    {..        directory.createdirectory(target.fullname);..        // copy each file into the new directory..        foreach (fileinfo fi in source.getfiles()).        {...                fi.copyto(path.combine(target.fullname, fi.name), true);...        }..        // copy each subdirectory using recursion..        foreach (directoryinfo disourcesubdir in source.getdirectories()).        {.            directoryinfo nexttargetsubdir =.                target.createsubdirectory(disourcesubdir.name);.            copyall(disourcesubdir, nexttargetsubdir);..        }.    }...thanks in advance."

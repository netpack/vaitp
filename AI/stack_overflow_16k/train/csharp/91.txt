"how to solve the error: ""the type or namespace name 'bitmapfileheader' could not be found""? i need to write a file (bmp format). the program should: • load and display an arbitrary file on the screen (using file functions);..• check for a valid file format;..• read up to 256 colors (black / white, gray, 16,256);..• display information from file headers (type, size, resolution, use of compression, number of colors, ...), as well as a color palette;..• provide scrolling image...using system;..using system.collections.generic;..using system.componentmodel;..using system.data;..using system.drawing;..using system.linq;..using system.text;..using system.windows.forms;..using system.io;..using system.runtime.interopservices;....namespace project1..{..public partial class form1: form..{....[dllimport (""winmm.dll"")]..private static extern long mcisendstring (string strcommand, stringbuilder strreturn, int ireturnlength, intptr hwndcallback);....private string scommand = """";..public int k;..public string path;..public color [] pixel;..public form1 ()..{..this.components = ((icontainer) null);..this.path = """";..this.k = 0;..this.initializecomponent ();..error = new error ();..zooom = new zooom ();..            }..// error error;..// zooom zooom;......private void opentoolstripmenuitem_click (object sender, eventargs e)..{..this.label1.visible = false;..this.label2.visible = false;..this.label3.visible = false;..this.label4.visible = false;..this.label5.visible = false;..this.label7.visible = false;..this.label8.visible = false;..this.listview2.visible = false;..this.picturebox1.image = null;..openfiledialog dialog = new openfiledialog ();..if (dialog.showdialog () == dialogresult.ok)..{..this.path = dialog.filename;..filestream stream = new filestream (this.path, filemode.open, fileaccess.read); // synchronous and asynchronous write and read..byte [] buffer = new byte [marshal.sizeof (typeof (bitmapfileheader))]; // memory allocation for unmanaged code..stream.read (buffer, 0, marshal.sizeof (typeof (bitmapfileheader))); // read bytes from the stream and write data to the specified buffer..gchandle handle = gchandle.alloc (buffer, gchandletype.pinned); // access to a managed object from unmanaged memory..bitmapfileheader bitmapfileheader = (bitmapfileheader) marshal.ptrtostructure (handle.addrofpinnedobject (), typeof (bitmapfileheader)); // transfer from unmanaged to managed memory..handle.free ();..if (bitmapfileheader.bftype == 0x4d42)..{..this.k ++;..}..else..{..scommand = ""open "" ""+ @"" d:  1.mp3 ""+""  ""type mpegvideo alias mediafile"";..                                                                          // send a command..                                                                          mcisendstring (scommand, null, 0, intptr.zero);..                                                                          // command to play the file..                                                                          scommand = ""play mediafile"";..                                                                          // send a command..                                                                          mcisendstring (scommand, null, 0, intptr.zero);..                                                                          error.showdialog ();..}..}..}....private void viewtoolstripmenuitem_click (object sender, eventargs e)..{..if (this.k &lt;= 0)..{..this.picturebox1.image = null;..}..else..{..int num8;..int num9;..int num10;..int num11;..this.label1.visible = false;..this.label2.visible = false;..this.label3.visible = false;..this.label4.visible = false;..this.label5.visible = false;..this.label7.visible = false;..this.label8.visible = false;..this.listview1.visible = false;..this.autoscroll = false;..char [,] charray = new char [256, 4]; // 256..char [] charray2 = new char [1024]; // 1024..filestream stream = new filestream (this.path, filemode.open, fileaccess.read);..byte [] buffer1 = new byte [marshal.sizeof (typeof (bitmapfileheader))];..stream.read (buffer1, 0, marshal.sizeof (typeof (bitmapfileheader)));..gchandle handle = gchandle.alloc (buffer1, gchandletype.pinned);..bitmapfileheader bitmapfileheader = (bitmapfileheader) marshal.ptrtostructure (handle.addrofpinnedobject (), typeof (bitmapfileheader));..handle.free ();..int bibitcount = bitmapfileheader.bibitcount;..this.autoscroll = true;..this.picturebox1.image = null;..int x = 0;..int y = 0;..int index = 0;..color [] colorarray = new color [256]; // 256..int biwidth = bitmapfileheader.biwidth;..int biheight = bitmapfileheader.biheight;..int num7 = bitmapfileheader.biwidth + (((bitmapfileheader.biwidth% 4) == 0)? 0: (4 - (bitmapfileheader.biwidth% 4)));..bitmap bitmap = new bitmap (biwidth +2, biheight + 2);..switch (bitmapfileheader.bibitcount)..{..case 1:..{..index = 0;..while (index &lt;(((int) 1) &lt;&lt; bitmapfileheader.bibitcount))..{..num8 = stream.readbyte ();..num9 = stream.readbyte ();..num10 = stream.readbyte ();..num11 = stream.readbyte ();..colorarray [index] = color.fromargb (255, num10, num9, num8);..index ++;..}..index = 0;..x = 0;..y = biheight;..int readinstring = 0; // read bits in string..int readgroupbyte = 0; // read bytes in a group of 4..for (index = 0; stream.position &lt;stream.length; index + = 1)..{..readgroupbyte ++;..if (readgroupbyte == 4)..readgroupbyte = 0;..if (readinstring == biwidth)..{..readinstring = 0;..x = 0; y--;..if (y &lt;0)..break;..index + = 4 - readgroupbyte;..readgroupbyte = 0;..continue;..}..else // not all bits have been read in the string yet...{..num11 = stream.readbyte ();..for (int j = 0; j &lt;8; j ++)..{..if (readinstring == biwidth)..{..x = 0; y--;..break;}....int indexbit = ((num11 &gt;&gt; (7 - j)) &amp; 1);..readinstring ++;..bitmap.setpixel (x, y, colorarray [indexbit]);..x ++;..}..}..}..                  break;..}......case 2:..index = 0;..while (index &lt;(((int) 1) &lt;&lt; bitmapfileheader.bibitcount))..{..num8 = stream.readbyte ();..num9 = stream.readbyte ();..num10 = stream.readbyte ();..num11 = stream.readbyte ();..colorarray [index] = color.fromargb (0xff, num10, num9, num8);..index ++;..}..for (index = 0; stream.position &lt;stream.length; index ++)..{..x = index% num7; // assignment of balance..y = biheight - (index / num7);..num11 = stream.readbyte ();..x = index% num7;..y = biheight - (index / num7);..bitmap.setpixel (x, y, colorarray [num11]);..}..break;..case 4:..index = 0;..while (index &lt;(((int) 1) &lt;&lt; bitmapfileheader.bibitcount))..{..num8 = stream.readbyte ();..num9 = stream.readbyte ();..num10 = stream.readbyte ();..num11 = stream.readbyte ();..colorarray [index] = color.fromargb (0xff, num10, num9, num8);..index ++;..}..index = 0;..while (stream.position &lt;stream.length)..{..num11 = stream.readbyte ();..x = index% num7;..y = biheight - (index / num7);..bitmap.setpixel (x, y, colorarray [num11 &gt;&gt; 4]);..bitmap.setpixel (x + 1, y, colorarray [num11 &amp; 15]);..index + = 2;..}..break;..case 8:..for (index = 0; index &lt;(((int) 1) &lt;&lt; bitmapfileheader.bibitcount); index ++)..{..num8 = stream.readbyte ();..num9 = stream.readbyte ();..num10 = stream.readbyte ();..num11 = stream.readbyte ();..colorarray [index] = color.fromargb (0xff, num10, num9, num8); // 0xff - 255..}..index = 0;..while (stream.position &lt;stream.length)..{..num11 = stream.readbyte ();..x = index% num7;..y = biheight - (index / num7);..bitmap.setpixel (x, y, colorarray [num11]);..index ++;..}..break;....case 24:..while (stream.position &lt;stream.length)..{..num8 = stream.readbyte ();..num9 = stream.readbyte ();..num10 = stream.readbyte ();..x = index% num7;..y = biheight - (index / num7);..bitmap.setpixel (x, y, color.fromargb (0xff, num10, num9, num8));..index ++;..}..break;..}..this.picturebox1.width = bitmapfileheader.biwidth;..this.picturebox1.height = bitmapfileheader.biheight;..this.picturebox1.image = bitmap;..bitmap.save (""1.bmp"");..}....}....private void picturebox1_click (object sender, eventargs e)..{....}....private void infotoolstripmenuitem_click (object sender, eventargs e)..{..if (this.k &lt;= 0)..{..this.label1.visible = false;..this.label2.visible = false;..this.label3.visible = false;..this.label4.visible = false;..this.label5.visible = false;..this.label7.visible = false;..this.label8.visible = false;..this.listview2.visible = false;..this.autoscroll = false;..}..else..{..this.label1.visible = true;..this.label2.visible = true;..this.label3.visible = true;..this.label4.visible = true;..this.label5.visible = true;..this.label7.visible = true;..this.label8.visible = true;..this.listview2.visible = false;..this.autoscroll = true;..this.picturebox1.image = null;..string [] strarray = new string [10];..filestream stream = new filestream (this.path, filemode.open, fileaccess.read);..byte [] buffer = new byte [marshal.sizeof (typeof (bitmapfileheader))];..stream.read (buffer, 0, marshal.sizeof (typeof (bitmapfileheader)));..gchandle handle = gchandle.alloc (buffer, gchandletype.pinned);..bitmapfileheader bitmapfileheader = (bitmapfileheader) marshal.ptrtostructure (handle.addrofpinnedobject (), typeof (bitmapfileheader));..handle.free ();..if (bitmapfileheader.bftype == 19778)..{..this.label8.text = ""path and filename:"" + stream.name;..this.label1.text = ""file type: bmp"";..this.label2.text = ""file size:"" + bitmapfileheader.bfsize.tostring () + ""(byte)"";..this.label3.text = ""image height:"" + bitmapfileheader.biheight.tostring ();..this.label4.text = ""image width:"" + bitmapfileheader.biwidth.tostring ();..switch (bitmapfileheader.bibitcount)..{..case 1:..this.label5.text = ""number of colors: 2"";..break;..case 24:..this.label5.text = ""number of colors: the palette is not used, each three byte of the image represents one pixel, byte for the intensity of the blue, green and red channels, respectively"";..break;....case 32:..if (bitmapfileheader.bicompression == 0)..{..this.label5.text = ""number of colors: the image does not contain a palette"";..}..else..{..this.label5.text = ""number of colors: every four bytes of the image represent one pixel, byte for the intensity of the blue, green and red channels, respectively"";..}..break;....case 8:..this.label5.text = ""number of colors: the palette contains up to 256 colors, each byte of the image stores an index in the palette for one pixel"";..break;....case 16:..if (bitmapfileheader.bicompression == 0)..{..this.label5.text = ""number of colors: the image does not contain a palette"";..}..else..{..this.label5.text = ""number of colors: every two bytes of the image store the intensity of the red, green and blue components of one pixel"";..}..break;..}..switch (bitmapfileheader.bicompression)..{..case 0:..this.label7.text = ""compression type: uncompressed image"";..break;....case 1:..this.label7.text = ""compression type: rle compression for 8-bit images"";..break;....case 2:..this.label7.text = ""compression type: rle compression for 4-bit images"";..break;....case 4:..this.label7.text = ""compression type: win98 / me / 2000 / xp: jpeg compression"";..break;....case 5:..this.label7.text = ""compression type: win98 / me / 2000 / xp: png compression"";..break;....case 6:..this.label7.text = ""compression type: wince: the image is not compressed, the palette contains four 4-byte masks for the red, green, blue and transparent (alpha channel) color component. used for 16-bit and 32-bit images"";..break;..}..}..}....}....private void colortoolstripmenuitem_click (object sender, eventargs e)..{..if (this.k&gt; 0)..{..int num2;..int num3;..int num4;..int num5;..this.label1.visible = false;..this.label2.visible = false;..this.label3.visible = false;..this.label4.visible = false;..this.label5.visible = false;..this.label7.visible = false;..this.label8.visible = false;..this.picturebox1.visible = false;..this.listview2.visible = true;..this.listview2.clear ();..string [] strarray = new string [10];..filestream stream = new filestream (this.path, filemode.open, fileaccess.read);..byte [] buffer = new byte [marshal.sizeof (typeof (bitmapfileheader))];..stream.read (buffer, 0, marshal.sizeof (typeof (bitmapfileheader)));..gchandle handle = gchandle.alloc (buffer, gchandletype.pinned);..bitmapfileheader bitmapfileheader = (bitmapfileheader) marshal.ptrtostructure (handle.addrofpinnedobject (), typeof (bitmapfileheader));..handle.free ();..int num = 0;..int num6 = 0;..switch (bitmapfileheader.bibitcount)..{..case 4:..while (stream.position &lt;1078)..{..num2 = stream.readbyte ();..num3 = stream.readbyte ();..num4 = stream.readbyte ();..num5 = stream.readbyte ();..this.listview2.items.add (convert.tostring (num6));..this.listview2.items [num6] .backcolor = color.fromargb (num5, num4, num3, num2);..num6 ++;..num ++;..}..break;....case 8:..{....while (stream.position &lt;1078)..{..num2 = stream.readbyte ();..num3 = stream.readbyte ();..num4 = stream.readbyte ();..num5 = stream.readbyte ();..this.listview2.items.add (convert.tostring (num6));..this.listview2.items [num6] .backcolor = color.fromargb (num5, num4, num3, num2);..num6 ++;..num ++;..}..break;..}..case 24:..messagebox.show (""no palette!"", ""error"", messageboxbuttons.ok, messageboxicon.hand);..break;..}..}....}....private void label8_click (object sender, eventargs e)..{....}....private void zoomtoolstripmenuitem_click (object sender, eventargs e)..{..zooom.show ();..}....private void form1_load (object sender, eventargs e)..{....}....}..}"

"how to get or create new map entry i'm trying to write a simple utility function to get a value from a map and, if it's not found to create a new value class and put that in the map...it seems though very difficult to get the classes of the map's key and value at runtime and the best i can come up with is something horrible along the following lines...is there a better way?..private object getorcreate( map&lt;object, object&gt; map, object key, class&lt;?&gt; mapvalueclass ) {.    object value = map.get( key );      ..    if (value == null) {                     .        constructor&lt;?&gt; con = mapvalueclass.getconstructor( key.getclass() );.        value = con.newinstance( key );  .        map.put( key, value );               .    }..    return value;.}"

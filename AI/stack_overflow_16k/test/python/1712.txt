"popen with threads - not collecting all output i'm trying to write a blank tool that can ping multiple hosts, using multiple threads. i have my code mainly working. code below.....from threading import thread.from subprocess import popen, pipe..class ping:.    def __init__(self, hosts):.        self.hosts = hosts.        self.results = dict()..    def register_threads(self):.        self.threads = list().        for host in self.hosts:.            print('registering thread %s' % host).            thread = thread(target=self.run_command, args=(host,)).            self.threads.append(thread)..    def start_threads(self):.        for thread in self.threads:.            thread.start()..    def main(self):.        self.register_threads().        self.start_threads()..    def run_command(self, host):.        process = popen('ping {} -c 50'.format(host), stdout=pipe, shell=true).        self.results[host] = list().        while true:.            line = process.stdout.readline().rstrip().            print(line).            if not line:.                print(""not line"").                break.            self.results[host].append(str(line, 'utf-8'))...however, if the host is not reachable i do not get anything returned? i.e the  like so,..&gt;&gt;&gt; from lib.ping import *.&gt;&gt;&gt; ping = ping(hosts=['1.2.2.2']).&gt;&gt;&gt; ping.main().registering thread 1.2.2.2.&gt;&gt;&gt; print(ping.results).{'1.2.2.2': ['ping 1.2.2.2 (1.2.2.2) 56(84) bytes of data.']}...however, from a ping on another liunx device i get,..rick@abc:~$ ping 1.2.2.2 -c 5.ping 1.2.2.2 (1.2.2.2) 56(84) bytes of data...--- 1.2.2.2 ping statistics ---.5 packets transmitted, 0 received, 100% packet loss, time 4004ms...any ideas of how to get the statistics line, and also know if the host is not reachable...thanks."

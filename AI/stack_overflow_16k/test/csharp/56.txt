"file.move() rename not working my app takes ""unclean"" file names and ""cleans"" them up.  ""unclean"" file names contain characters like @, #, ~, +, %, etc.  the ""cleaning"" process replaces those chars with """".  however, i found that if there are two files in the same folder that, after a cleaning, will have the same name, my app does not rename either file.  (i.e. ##test.txt and ~test.txt will both be named test.txt after the cleaning).  ..therefore, i put in a loop that basically checks to see if the file name my app is trying to rename already exists in the folder.  however, i tried running this and it would not rename all the files.  am i doing something wrong?..here's my code:..        public void filecleanup(list&lt;string&gt; paths).    {.        string regpattern = (@""[~#&amp;!%+{}]+"");.        string replacement = """";..        regex regexpattern = new regex(regpattern);.        list&lt;string&gt; existingnames = new list&lt;string&gt;();.        streamwriter errors = new streamwriter(@""c:documents and settingsjoe.schmoedesktopsharepointtestingerrors.txt"");.        streamwriter resultsofrename = new streamwriter(@""c:documents and settingsjoe.schmoedesktopsharepointtestingresults of file rename.txt"");..        var filescount = new dictionary&lt;string, int&gt;();.        string replacespecialcharswith = ""_"";..        foreach (string files2 in paths)..            try.            {.                string filenameonly = path.getfilename(files2);.                string pathonly = path.getdirectoryname(files2);.                string sanitizedfilename = regexpattern.replace(filenameonly, replacement);.                string sanitized = path.combine(pathonly, sanitizedfilename);.                if (!system.io.file.exists(sanitized)).                {.                    system.io.file.move(files2, sanitized);.                    resultsofrename.write(""path: "" + pathonly + "" / "" + ""old file name: "" + filenameonly + ""new file name: "" + sanitized + ""rn"" + ""rn"");   .                }..                else .                {.                    existingnames.add(sanitized);.                    foreach (string names in existingnames).                    {..                        string sanitizedpath = regexpattern.replace(names, replacespecialcharswith);.                        if (filescount.containskey(sanitizedpath)).                        {.                            filescount[names]++;.                        }.                        else.                        {.                            filescount.add(sanitizedpath, 1);.                        }..                        string newfilename = string.format(""{0},{1}, {2}"", path.getfilenamewithoutextension(sanitizedpath),.                        filescount[sanitizedpath] != 0.                        ? filescount[sanitizedpath].tostring().                        : """",.                        path.getextension(sanitizedpath));..                        string newfilepath = path.combine(path.getdirectoryname(sanitizedpath), newfilename);.                        system.io.file.move(names, newfilename);..                    }.                 }.              }.            catch (exception e).            {.                //write to streamwriter..            }..    }..}...anybody have any idea why my code won't rename duplicate files uniquely?"

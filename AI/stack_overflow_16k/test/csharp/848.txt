"refactoring two functions fails i have two methods: one that handles updating pictures, and one that resizes pictures and draws a rectangle...public void updatepicture().{.    if (imagelist.selecteditem == null) return;..    /*string filename = imagelist.selecteditem.tostring();.    var currentfile = new system.io.fileinfo(imagelist.selecteditem.tostring());..    picturebox1.load(filename); this code is moved to resizeimage*/..    resizeimage(false, true);.    //drawrect(); it works if i enable this code.}...however, i'm trying to move everything over to resizeimage():..private void resizeimage(boolean draw, boolean update).{.    if (!isvalid()) return;..    if (update) .    {.        string filename = imagelist.selecteditem.tostring();.        var currentfile = new system.io.fileinfo(imagelist.selecteditem.tostring());.        picturebox1.load(filename);.    }..    bitmap bitmap = new bitmap(picturebox1.image);..    if (bitmap.width &lt; picturebox1.width &amp;&amp; bitmap.height &lt; picturebox1.height).    {.        picturebox1.image = bitmap;.        return;.    }..    int width, height;..    float percentwidth = (float)picturebox1.width / (float)bitmap.width;.    float percentheight = (float)picturebox1.height / (float)bitmap.height;.    float percent = percentheight &lt; percentwidth ? percentheight : percentwidth;..    width = convert.toint32(bitmap.width * percent);.    height = convert.toint32(bitmap.height * percent);..    bitmap cropbitmap = new bitmap(width, height);.    graphics g = graphics.fromimage(cropbitmap);..    g.compositingquality = system.drawing.drawing2d.compositingquality.highquality;.    g.interpolationmode = system.drawing.drawing2d.interpolationmode.highqualitybicubic;.    g.pixeloffsetmode = system.drawing.drawing2d.pixeloffsetmode.highquality;.    g.smoothingmode = system.drawing.drawing2d.smoothingmode.highquality;..    g.drawimage(bitmap, 0, 0, cropbitmap.width, cropbitmap.height);.    picturebox1.image = cropbitmap;..    if (draw) .    {.        drawrect();.    }.}...in this state it won't work, but to make it work, i simply call the drawrect() method within the updatepicture() method, which is basically just moving code. i'm not calling it at different times either...here is my drawrect() method:..private void drawrect().{.    picturebox1.refresh();.    picturebox1.creategraphics().drawrectangle(pen, cropx, cropy, cropw, croph);.}...anyone able to see my mistake?"

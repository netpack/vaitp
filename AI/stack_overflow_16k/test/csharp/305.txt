"an interesting blank nullreferenceexception i was getting a nullreferenceexception in a web application and spent a huge deal of time to actually find the problem. i reproduced the problem with a console application. you can try to run the following code as it is â€“..using system;.using system.linq.expressions;..namespace expression.{.    public struct valuetype { }.    public class referencetype { }.    public class myclass.    {.        public referencetype referencetype { get; set; }.        public valuetype valuetype { get; set; }.    }..    class program.    {.        public static string getpropertyname&lt;t&gt;(expression&lt;func&lt;t, object&gt;&gt; expression).        {.            return (expression.body as memberexpression).member.name;.        }.        static void main(string[] args).        {.            myclass c1 = new myclass();.            myclass c2 = new myclass();..            console.writeline(getpropertyname&lt;myclass&gt;(x =&gt; x.referencetype));.                // no error...            console.writeline(getpropertyname&lt;myclass&gt;(x =&gt; x.valuetype)); .                // system.nullreferenceexception.        }.    }.} ...so the problem is the generic function getpropertyname works when the expression given as the parameter of the function with the reference type property but the value type property causes system.nullreferenceexception at (expression.body as memberexpression).member....  so my question is why it works for reference type and not value type?"

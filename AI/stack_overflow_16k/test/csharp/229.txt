"blank create an instance of a class in dynamic code not working i have a textbox where the user can input some code and execute it. it creats a dynamic class and run it. in this class i try to create an instance of another class but the compiler doesn't find it:..function to execute code:..private void execute(string code).{.    stringbuilder sb = new stringbuilder();..    //-----------------.    // create the class as usual.    sb.appendline(""using system;"");.    sb.appendline(""using system.windows.forms;"");.    sb.appendline(""using system.collections.generic;"");.    sb.appendline(""using system.linq;"");.    sb.appendline(""using system.text;"");.    sb.appendline(""using system.threading.tasks;"");.    sb.appendline();.    sb.appendline(""namespace testumgebung"");.    sb.appendline(""{"");..    sb.appendline(""      public class usercodeclass"");.    sb.appendline(""      {"");..    sb.appendline(""            ea_netzteil ng1 = new ea_netzteil();"");.    sb.appendline(""            public bool ks1isused { get; set; }"");.    // function.    sb.appendline(""            public string myfunction(int input)"");.    sb.appendline(""            {"");.    sb.appendline(""                 if(ks1isused)"");.    sb.appendline(""                 {"");..    sb.appendline(""                 }"");.    sb.appendline(code);.    sb.appendline(""            }"");.    sb.appendline(""      }"");.    sb.appendline(""}"");...    //-----------------.    // the finished code.    string classcode = sb.tostring();..    //-----------------.    // dont need any extra assemblies.    object[] requiredassemblies = new object[] { };..    dynamic classref;.    try.    {.        textbox_skripte_runlog.clear();..        //------------.        // pass the class code, the namespace of the class and the list of extra assemblies needed.        classref = codehelper.helperfunction(classcode, ""testumgebung.usercodeclass"", requiredassemblies);..        //-------------------.        // if the compilation process returned an error, then show to the user all errors.        if (classref is compilererrorcollection).        {.            stringbuilder sberror = new stringbuilder();..            foreach (compilererror error in (compilererrorcollection)classref).            {.                sberror.appendline(string.format(""{0}:{1} {2} {3}"", error.line, error.column, error.errornumber, error.errortext));.            }..            textbox_skripte_runlog.text = sberror.tostring();..            return;.        }.    }.    catch (exception ex).    {.        // if something very bad happened then throw it.        messagebox.show(ex.message);.        throw;.    }..    //-------------.    // finally call the class .    string targetvalues = classref.myfunction(3);..}...helperclass:..using system;.using system.collections.generic;.using system.linq;.using system.text;.using system.threading.tasks;.using microsoft.csharp;.using system.codedom.compiler;.using system.reflection;.using system.reflection.emit;...namespace testumgebung.{.    public class codehelper.    {.        public static object helperfunction(string classcode, string mainclass, object[] requiredassemblies).        {.            csharpcodeprovider provider = new csharpcodeprovider(new dictionary&lt;string, string&gt;.              {.                 { ""compilerversion"", ""v4.0"" }.              });..            compilerparameters parameters = new compilerparameters.            {.                generateexecutable = false,       // create a dll.                generateinmemory = true,          // create it in memory.                warninglevel = 3,                 // default warning level.                compileroptions = ""/optimize"",    // optimize code.                treatwarningsaserrors = false     // better be false to avoid break in warnings.            };...            //----------------.            // add basic referenced assemblies.            parameters.referencedassemblies.add(""system.dll"");.            parameters.referencedassemblies.add(""system.windows.forms.dll"");.            parameters.referencedassemblies.add(""system.core.dll"");...            //----------------.            // add all extra assemblies required.            foreach (var extraasm in requiredassemblies).            {.                parameters.referencedassemblies.add(extraasm as string);.            }..            //--------------------.            // try to compile the code received.            compilerresults results = provider.compileassemblyfromsource(parameters, classcode);..            //--------------------.            // if the compilation returned error, then return the compilererrorcollection class .            // with the errors to the caller.            if (results.errors.count != 0).            {.                return results.errors;.            }..            //--------------------.            // return the created class instance to caller.            return results.compiledassembly.createinstance(mainclass); ;.        }.    }.}...ea_netzteil class:..namespace testumgebung.{.    public class ea_netzteil.    {.    }.}...the problem is that ea_netzteil ng1 = new ea_netzteil(); doesn't work. ea_netzteil is not found. the error is the following:...  cs0246: the type or namespace name 'ea_netzteil' could not be found (are you missing a using directive or an assembly reference?)...in a real class ea_netzteil ng1 = new ea_netzteil(); is working, but not in the dynamic class. how to get it working? ..thank you in advance for your help."

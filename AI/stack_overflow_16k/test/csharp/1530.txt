"how to set date/time from time server hi i am using below function from how to query an ntp server using blank? to get time from time server..public  datetime _mgetnetworktime().{.    try.    {.        //default windows time server.        const string ntpserver = ""time.windows.com"";..        // ntp message size - 16 bytes of the digest (rfc 2030).        var ntpdata = new byte[48];..        //setting the leap indicator, version number and mode values.        ntpdata[0] = 0x1b; //li = 0 (no warning), vn = 3 (ipv4 only), mode = 3 (client mode)..        var addresses = dns.gethostentry(ntpserver).addresslist;..        //the udp port number assigned to ntp is 123.        var ipendpoint = new ipendpoint(addresses[0], 123);.        //ntp uses udp.        var socket = new socket(addressfamily.internetwork, sockettype.dgram, protocoltype.udp);..        socket.connect(ipendpoint);..        socket.send(ntpdata);.        socket.receive(ntpdata);.        socket.close();..        //offset to get to the ""transmit timestamp"" field (time at which the reply .        //departed the server for the client, in 64-bit timestamp format."".        const byte serverreplytime = 40;..        //get the seconds part.        ulong intpart = bitconverter.touint32(ntpdata, serverreplytime);..        //get the seconds fraction.        ulong fractpart = bitconverter.touint32(ntpdata, serverreplytime + 4);..        //convert from big-endian to little-endian.        intpart = swapendianness(intpart);.        fractpart = swapendianness(fractpart);..        var milliseconds = (intpart * 1000) + ((fractpart * 1000) / 0x100000000l);..        //**utc** time.        var networkdatetime = (new datetime(1900, 1, 1, 0, 0, 0, datetimekind.utc)).addmilliseconds((long)milliseconds);..        return networkdatetime.tolocaltime();.    }.    catch (exception e).    {.        messagebox.show(e.message);.        return convert.todatetime (""12-31-1900"");.    }.}..uint swapendianness(ulong x).{.    return (uint)(((x &amp; 0x000000ff) &lt;&lt; 24) +.                   ((x &amp; 0x0000ff00) &lt;&lt; 8) +.                   ((x &amp; 0x00ff0000) &gt;&gt; 8) +.                   ((x &amp; 0xff000000) &gt;&gt; 24));.}...above function is working but my issue is : ..it is not getting indian time . suppose now time is 9:10 pm function is setting 5:30 am, date is correct .. ..please guide me where i am wrong .. ..thanks..update : ..i am setting a date time veritable for example  datetime a = _mgetnetworktime(); with above code and passing values to other function.which is below...[structlayout(layoutkind.sequential)].        public struct systemtime.        {.            public short wyear;.            public short wmonth;.            public short wdayofweek;.            public short wday;.            public short whour;.            public short wminute;.            public short wsecond;.            public short wmilliseconds;.        }.        [dllimport(""kernel32.dll"", setlasterror = true)].        public static extern bool setsystemtime(ref systemtime st);..        public  void _msetsystemdate(short _pyear, short _pmonth, short _pday, short _phour = 0, short _pminute = 0, short _psecond = 0).        {.            if (isuseradministrator()).            {.                systemtime st = new systemtime();.                st.wyear = _pyear; // must be short.                st.wmonth = _pmonth;.                st.wday = _pday;.                st.whour = _phour;.                st.wminute = _pminute;.                st.wsecond = _psecond;.                setsystemtime(ref st); // invoke this method..            }.            else.            {.                messagebox.show(""you have not windows administrator access."" + environment.newline + ""please login windows with addministrator rights."");.            }.        }"

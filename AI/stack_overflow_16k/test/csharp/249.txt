"ping completed event handler not working when i execute this code in command line, it's working fine:..class program.{..    private static list&lt;ping&gt; pingers = new list&lt;ping&gt;();.    private static list&lt;string&gt; value = new list&lt;string&gt;();.    private static int instances = 0;.    private static object @lock = new object();.    private static int result = 0;.    private static int timeout = 2500;.    private static int ttl = 7;.    public static void main().    {.        string baseip = ""192.168.1."";..        console.writeline(""pinging  destinations of d-class in {0}*"", baseip);..        createpingers(254);...        pingoptions po = new pingoptions(ttl, true);.        system.text.asciiencoding enc = new system.text.asciiencoding();.        byte[] data = enc.getbytes("""");..        spinwait wait = new spinwait();.        int cnt =1;..        stopwatch watch = stopwatch.startnew();..        foreach (ping p in pingers).        {.            lock (@lock).            {.                instances += 1;.            }..            p.sendasync(string.concat(baseip, cnt.tostring()), timeout, data, po);.            cnt += 1;.        }..        //while (instances &gt; 0).        //{.        //    wait.spinonce();.        //}..        watch.stop();.        for (int i = 0; i &lt; value.count; i++).        {.            console.writeline(value[i]);.        }.        destroypingers();..        console.writeline(""finished in {0}. found {1} active ip-addresses."", watch.elapsed.tostring(), result);.        console.readkey();..    }..    public static void ping_completed(object s, pingcompletedeventargs e).    {.        lock (@lock).        {.            instances -= 1;.        }..        if (e.reply.status == ipstatus.success).        {..           string sa = string.concat(""active ip: "", e.reply.address.tostring());.           value.add(sa);.          //console.writeline(sa);.            string diachiip = e.reply.address.tostring();.            result += 1;..        }.        else.        {.            //console.writeline(string.concat(""non-active ip: "", e.reply.address.tostring())).        }.    }...    private static void createpingers(int cnt).    {.        for (int i = 1; i &lt;= cnt; i++).        {.            ping p = new ping();.            p.pingcompleted += ping_completed;.            pingers.add(p);.        }.    }..    private static void destroypingers().    {.        foreach (ping p in pingers).        {.            p.pingcompleted -= ping_completed;.            p.dispose();.        }..        pingers.clear();..    }.}...but when i convert from it to window form, it doesn't work. i don't kwow why, i have tried many different ways.....code is here:..public partial class form1 : form.{..    public static list&lt;ping&gt; pingers = new list&lt;ping&gt;();.    public static list&lt;string&gt; value = new list&lt;string&gt;();.    public static int instances = 0;.    public static object @lock = new object();.    public static int result = 0;.    public int timeout = 2500;.    public static int ttl = 7;.    public form1().    {.        initializecomponent();.    }..    public void btnscan_click(object sender, eventargs e).    {.        string baseip = ""192.168.1."";.        //int kt = int32.parse(txtkt.text);.        //int start = int32.parse(txtstart.text);.        createpingers(254);.        pingoptions po = new pingoptions(ttl, true);.        system.text.asciiencoding enc = new system.text.asciiencoding();.        byte[] data = enc.getbytes("""");.        int cnt = 1;.        stopwatch watch = stopwatch.startnew();.        foreach (ping p in pingers).        {.            lock (@lock).            {.                instances += 1;..            }.            p.sendasync(string.concat(baseip, cnt.tostring()), timeout, data, po);.            cnt += 1;        .        }.        watch.stop();.        //result alway return 0.        lst1.items.add(result.tostring());.        lst1.items.add(value.count.tostring());.        for (int i = 0; i &lt; value.count; i++).        {.            lst1.items.add(value[i]);.            lst1.items.add(""n"");.        }.        destroypingers();.        string a = ""finished in "" + watch.elapsed.tostring() + "". found "" + result + "" active ip-addresses."";.        lst1.items.add(a);.    }...    public static void createpingers(int kt).    {.        for (int start = 1; start &lt;= kt; start++).        {.            // class system.net.networkinformation.ping.            ping p = new ping();.            p.pingcompleted += ping_completed();.            pingers.add(p);.        }.    }..     public static pingcompletedeventhandler ping_completed().    {.         pingcompletedeventhandler a = new pingcompletedeventhandler(abc);.         return a;.    }..    static void abc(object s, pingcompletedeventargs e).     {.         value.add(""abc"");.         lock (@lock).         {.             instances -= 1;.         }.         if (e.reply.status == ipstatus.success).         {.             string abcd = string.concat(""active ip: "", e.reply.address.tostring());.             value.add(abcd);.             result += 1;.         }.     }.     public static void destroypingers().     {.         foreach (ping p in pingers).         {.             p.pingcompleted -= ping_completed();.             p.dispose();.         }.         pingers.clear();.     }.}...what is wrong in this code?"

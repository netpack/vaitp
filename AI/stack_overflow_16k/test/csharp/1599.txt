"marshal.ptrtostructure<t>(intptr ptr, t structure) throws [system.argumentexception]: the structure must not be a value class i think there might be a bug in the blank method ..marshal.ptrtostructure&lt;t&gt;(intptr ptr, t structure)...i wrongly assumed t structure means you can pass in your structure you want to fill but when i do this as in the example below an exception is thrown:...  [system.argumentexception: the structure must not be a value class..  parameter name: structure]...to give you a simple example:..using system;.using system.runtime.interopservices;..public class program.{.    public static void main().    {.        mystruct s = new mystruct();..        var buffer = new byte[]{1,2,3};.        var handle = gchandle.alloc(buffer, gchandletype.pinned);.        marshal.ptrtostructure&lt;mystruct&gt;(handle.addrofpinnedobject(), s);.        handle.free();.    }..    [structlayout(layoutkind.sequential, pack = 1)].    struct mystruct.    {.        public byte a;.        public byte b;.        public byte c;.    }.}...am i reading the method decleration wrong?  or is there a bug?"

"object is not returned from blank i'm trying to implement the web audio api into my website. currently, i have a function that asks for permission to microphone, then creates an object. i want to access that object from another function. although, the other function keeps stating the object is not defined. below is the code i'm working with...from what i've read, if the object is referenced outside the function then it is not deleted. ..i'm almost positive this is a scope issue, but for the life of me i cannot figure it out. any help is appreciated. thanks!....var stopbutton = document.getelementbyid('stop_button');.var startbutton = document.getelementbyid('start_button');..//gets audio permission from browser &amp; creates media stream if successful.function getpermission(){.   if (navigator.mediadevices &amp;&amp; navigator.mediadevices.getusermedia) { //checking for getusermedia support.      console.log('getusermedia supported.'); .      navigator.mediadevices.getusermedia (.         {.            audio: true.         })..         // success callback.         .then(function(stream) { //successful creation of a media stream.            var mediarecorder = new mediarecorder(stream);.            console.log(""stream &amp; mediarecorder created successfully"");.            return mediarecorder;.         })..         // error callback.         .catch(function(err) {.            console.log('the following getusermedia error occured: ' + err);.         }.      );.   } else {.      console.log('getusermedia not supported on your browser!');.   }.}.//creates new media recorder instance and passes it the stream directly..//at this point, the stream is ready to be captured into a blob (file-like object of immutable, raw data)..window.onload = getpermission();.startbutton.onclick = function(){startrecording()};.stopbutton.onclick = function(){stoprecording()};..function startrecording(){.  mediarecorder.start();.  console.log(mediarecorder.state);.  console.log(""recording started"");.}   .function stoprecording(){.  mediarecorder.stop();.  console.log(""recording stopped"");.}       .....what i've tried:...returning the object after it is created.placing the internals of startaudio() after the mediarecorder is instantiated. this worked, but obviously i want it to execute on click, not just run after the object is created ...i've read through at least 10 other so questions with the similar heading to no avail. they are similar, but not duplicate."

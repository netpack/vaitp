"recreating jquery `has()` with plain js. doesn't work for visited links this code intended to recreate jquery .has() effect with plain js. the 1st example works fine:..(https://jsfiddle.net/3fdnrsyq/)..&lt;script&gt;.nodelist.prototype.has = function(selector) {.  return array.from(this).filter(e =&gt; e.queryselector(selector)).}..document.  .queryselectorall('.main-container &gt; .analytics:not(#promo)').  .has('a').  .foreach(e =&gt; e.style.background = 'red').&lt;/script&gt;..&lt;div class=""main-container""&gt;.  &lt;div class=""analytics""&gt;.    &lt;a&gt;should be red&lt;/a&gt;.  &lt;/div&gt;.  &lt;div class=""analytics""&gt;.    should not be red.  &lt;/div&gt;.  &lt;div id=""promo"" class=""analytics""&gt;.    &lt;a&gt;should not be red&lt;/a&gt;.  &lt;/div&gt;.&lt;/div&gt;...however, it doesn't work when i try to use it with visited/unvisited links. here it is:..(https://jsfiddle.net/1bqdjfrg/)..&lt;div class=""main-container""&gt;.  &lt;figure&gt;.    &lt;a href=""https://google.com""&gt;foo&lt;/a&gt;.  &lt;/figure&gt;.  &lt;figure id=""promo""&gt;.    &lt;a href=""https://ndfkjbnfjkbfjkbf.com""&gt;bar&lt;/a&gt;.  &lt;/figure&gt;.  &lt;figure&gt;.    &lt;a href=""https://bfkjbfkjfvbjkfsv.com""&gt;baz&lt;/a&gt;.  &lt;/figure&gt;.&lt;/div&gt;..&lt;script&gt;.nodelist.prototype.has = function(selector) {.  return array.from(this).filter(e =&gt; e.queryselector(selector)).}..document.  .queryselectorall('.main-container &gt; figure').  .has('a:link').  .foreach(e =&gt; e.style.backgroundcolor = 'blue')..document.  .queryselectorall('.main-container &gt; figure').  .has('a:visited').  .foreach(e =&gt; e.style.backgroundcolor = 'violet').&lt;/script&gt;...what is the problem with it?"

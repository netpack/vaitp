"    def _expand_user_properties(self, template):        # Make sure username and servername match the restrictions for DNS labels        # Note: '-' is not in safe_chars, as it is being used as escape character        safe_chars = set(string.ascii_lowercase + string.digits)        # Set servername based on whether named-server initialised        if self.name:            # use two -- to ensure no collision possibilities            # are created by an ambiguous boundary between username and            # servername.            # -- cannot occur in a string where - is the escape char.            servername = '--{}'.format(self.name)            safe_servername = '--{}'.format(escapism.escape(self.name, safe=safe_chars, escape_char='-').lower())        else:            servername = ''            safe_servername = ''        legacy_escaped_username = ''.join([s if s in safe_chars else '-' for s in self.user.name.lower()])        safe_username = escapism.escape(self.user.name, safe=safe_chars, escape_char='-').lower()        return template.format(            userid=self.user.id,            username=safe_username,            unescaped_username=self.user.name,            legacy_escape_username=legacy_escaped_username,            servername=safe_servername,            unescaped_servername=servername,        )"
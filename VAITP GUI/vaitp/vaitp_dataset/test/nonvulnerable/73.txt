"def read_body_with_max_size(response, max_size):    """    Read a HTTP response body to a file-object. Optionally enforcing a maximum file size.    If the maximum file size is reached, the returned Deferred will resolve to a    Failure with a BodyExceededMaxSize exception.    Args:        response: The HTTP response to read from.        max_size: The maximum file size to allow.    Returns:        A Deferred which resolves to the read body.    """    d = defer.Deferred()    # If the Content-Length header gives a size larger than the maximum allowed    # size, do not bother downloading the body.    if max_size is not None and response.length != UNKNOWN_LENGTH:        if response.length > max_size:            response.deliverBody(_DiscardBodyWithMaxSizeProtocol(d))            return d    response.deliverBody(_ReadBodyWithMaxSizeProtocol(d, max_size))    return d"
"    def test_federation_client_unsafe_ip(self, resolver):        self.sydent.run()        request, channel = make_request(            self.sydent.reactor,            "POST",            "/_matrix/identity/v2/account/register",            {                "access_token": "foo",                "expires_in": 300,                "matrix_server_name": "example.com",                "token_type": "Bearer",            },        )        resolver.return_value = defer.succeed(            [                Server(                    host=self.unsafe_domain,                    port=443,                    priority=1,                    weight=1,                    expires=100,                )            ]        )        request.render(self.sydent.servlets.registerServlet)        self.assertNot(self.reactor.tcpClients)        self.assertEqual(channel.code, 500)"
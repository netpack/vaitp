"    def _expand_user_properties(self, template):        # Make sure username and servername match the restrictions for DNS labels        # Note: '-' is not in safe_chars, as it is being used as escape character        safe_chars = set(string.ascii_lowercase + string.digits)        raw_servername = self.name or ''        safe_servername = escapism.escape(raw_servername, safe=safe_chars, escape_char='-').lower()        legacy_escaped_username = ''.join([s if s in safe_chars else '-' for s in self.user.name.lower()])        safe_username = escapism.escape(self.user.name, safe=safe_chars, escape_char='-').lower()        rendered = template.format(            userid=self.user.id,            username=safe_username,            unescaped_username=self.user.name,            legacy_escape_username=legacy_escaped_username,            servername=safe_servername,            unescaped_servername=raw_servername,        )        # strip trailing - delimiter in case of empty servername.        # k8s object names cannot have trailing -        return rendered.rstrip("-")"
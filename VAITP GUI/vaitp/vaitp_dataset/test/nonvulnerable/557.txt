"def is_writable(dir):    """Determine whether a given directory is writable in a portable manner.    Parameters    ----------    dir : str        A string represeting a path to a directory on the filesystem.    Returns    -------    res : bool        True or False.    """    if not os.path.isdir(dir):        return False    # Do NOT use a hardcoded name here due to the danger from race conditions    # on NFS when multiple processes are accessing the same base directory in    # parallel.  We use both hostname and process id for the prefix in an    # attempt to ensure that there can really be no name collisions (tempfile    # appends 6 random chars to this prefix).    prefix = 'dummy_%s_%s_' % (socket.gethostname(),os.getpid())    try:        tmp = tempfile.TemporaryFile(prefix=prefix,dir=dir)    except OSError:        return False    # The underlying file is destroyed upon closing the file object (under    # *nix, it was unlinked at creation time)    tmp.close()    return True"
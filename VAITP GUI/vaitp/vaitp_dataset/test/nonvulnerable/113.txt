"    def test_reactor(self):        """Apply the blacklisting reactor and ensure it properly blocks        connections to particular domains and IPs.        """        agent = Agent(            BlacklistingReactorWrapper(                self.reactor,                ip_whitelist=self.ip_whitelist,                ip_blacklist=self.ip_blacklist,            ),        )        # The unsafe domains and IPs should be rejected.        for domain in (self.unsafe_domain, self.unsafe_ip):            self.failureResultOf(                agent.request(b"GET", b"http://" + domain), DNSLookupError            )        self.reactor.tcpClients = []        # The safe domains IPs should be accepted.        for domain in (            self.safe_domain,            self.allowed_domain,            self.safe_ip,            self.allowed_ip,        ):            agent.request(b"GET", b"http://" + domain)            # Grab the latest TCP connection.            (                host,                port,                client_factory,                _timeout,                _bindAddress,            ) = self.reactor.tcpClients.pop()"
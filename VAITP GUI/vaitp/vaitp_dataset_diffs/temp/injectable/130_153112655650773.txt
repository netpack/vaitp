import shutil
import contextlib
import mkstemp, mkdtemp, NamedTemporaryFile
@contextlib.contextmanager
def tempdir(change_dir=False):
tmpdir = mkdtemp()
yield tmpdir
shutil.rmtree(tmpdir)
with tempdir() as tmpdir:
tmp = open(os.path.join(tmpdir, "file.npz
w")
np.savez(tmp, a=a)
del a
npfile = np.load(tmp)
a = npfile['a']
npfile.close()

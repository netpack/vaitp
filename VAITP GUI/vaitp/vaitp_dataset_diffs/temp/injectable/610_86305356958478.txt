def text_from_html(val):
return BeautifulSoup(force_str(val), 'html5lib').getText()
text_from_html(self.val_a),
text_from_html(self.val_b)
elif isinstance(block, (blocks.CharBlock, blocks.TextBlock)):
return CharBlockComparison
elif isinstance(block, blocks.RawHTMLBlock):
"""
Return an HTML representation of this block that is safe to be included
in comparison views
"""
return escape(text_from_html(self.block.render_basic(val)))
def htmldiff(self):
html_val_a = self.block.render_basic(self.val_a)
html_val_b = self.block.render_basic(self.val_b)
return diff_text(
text_from_html(html_val_a),
text_from_html(html_val_b)
).to_html()
def htmlvalue(self, val):
return escape(val)
pass
text_from_html(self.val_a),
text_from_html(self.val_b)

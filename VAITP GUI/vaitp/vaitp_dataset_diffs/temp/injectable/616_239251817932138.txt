import Dict, List, Optional, Tuple, Union
members: Dict[int, discord.Member] = {}
to_query: List[int] = []
member = guild.get_member(user_id)
if member is not None:
members[user_id] = member
elif not guild.chunked:
to_query.append(user_id)
while to_query:
queried_members = await guild.query_members(user_ids=to_query[:100], limit=100)
members.update((member.id, member) for member in queried_members)
to_query = to_query[100:]
for member in members:
try:
success, reason = await self.ban_user(
user=member, ctx=ctx, days=days, reason=reason, create_modlog_case=True
)
if success:
banned.append(user_id)
errors[user_id] = _("Failed to ban user {user_id}: {reason}").format(
user_id=user_id, reason=reason
)
except Exception as e:
errors[user_id] = _("Failed to ban user {user_id}: {reason}").format(
user_id=user_id, reason=e
)

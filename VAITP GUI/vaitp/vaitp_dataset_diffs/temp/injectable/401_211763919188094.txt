import is_valid_hostname
hostname = args['matrix_server_name'].lower()
if not is_valid_hostname(hostname):
request.setResponseCode(400)
return {
'errcode': 'M_INVALID_PARAM',
'error': 'matrix_server_name must be a valid hostname'
}
"matrix://%s/_matrix/federation/v1/openid/userinfo?access_token=%s"
% (
hostname,
urllib.parse.quote(args['access_token']),

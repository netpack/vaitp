import Set
import generate_ip_set, DEFAULT_IP_RANGE_BLACKLIST
'ip.blacklist': '',
'ip.whitelist': '',
def __init__(self, cfg, reactor=twisted.internet.reactor, use_tls_for_federation=True):
self.use_tls_for_federation = use_tls_for_federation
ip_blacklist = set_from_comma_sep_string(self.cfg.get("general", "ip.blacklist"))
if not ip_blacklist:
ip_blacklist = DEFAULT_IP_RANGE_BLACKLIST
ip_whitelist = set_from_comma_sep_string(self.cfg.get("general", "ip.whitelist"))
self.ip_blacklist = generate_ip_set(ip_blacklist)
self.ip_whitelist = generate_ip_set(ip_whitelist)
def set_from_comma_sep_string(rawstr: str) -> Set[str]:
if rawstr == '':
return set()
return {x.strip() for x in rawstr.split(',')}

import os
import errno
If no directory is specified a default cache directory is selected.  On
Windows the user's temp directory is used, on UNIX systems a directory
is created for the user in the system temp directory.
directory = self._get_default_cache_dir()
def _get_default_cache_dir(self):
tmpdir = tempfile.gettempdir()
if os.name == 'n':
return tmpdir
if not hasattr(os, 'getuid'):
raise RuntimeError('Cannot determine safe temp directory.  You '
'need to explicitly provide one.')
dirname = '_jinja2-cache-%d' % os.getuid()
actual_dir = os.path.join(tmpdir, dirname)
try:
os.mkdir(actual_dir, 0700)
except OSError as e:
if e.errno != errno.EEXIST:
raise
return actual_dir

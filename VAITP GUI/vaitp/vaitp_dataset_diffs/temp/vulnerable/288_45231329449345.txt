import implementer
import IReactorPluggableNameResolver, IReactorTime
    IPBlacklistingResolver,
        real_reactor = hs.get_reactor()

        nameResolver = IPBlacklistingResolver(
            real_reactor, None, hs.config.federation_ip_range_blacklist
        @implementer(IReactorPluggableNameResolver)
        class Reactor:
            def __getattr__(_self, attr):
                if attr == "nameResolver":
                    return nameResolver
                else:
                    return getattr(real_reactor, attr)

        self.reactor = Reactor()

            self.reactor, tls_client_options_factory, user_agent
